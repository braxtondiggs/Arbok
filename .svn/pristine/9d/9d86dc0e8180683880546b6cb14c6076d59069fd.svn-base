<!DOCTYPE html>
<html class="no-js">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/vendor/bootstrap.min.css">
        <link rel="stylesheet" href="css/plugins/jquery.mmenu.all.css">
        <link rel="stylesheet" href="css/main.css">
            
        <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
        <script src="http://192.168.15.228:8080/socket.io/socket.io.js"></script>
        <!--<script src="http://localhost:8080/socket.io/socket.io.js"></script>-->
<script>
    var socket = io.connect('http://192.168.15.228:8080', {secure:false}), isEmpty = true;
    socket.on('connect', function(data){
	socket.emit('remote');
        socket.on("init", function(data){
            song_catch(data.playlist);
            $('#thumb-up > span').text(data.vote.actions.up).data("count", data.vote.actions.up);
            $('#thumb-down > span').text(data.vote.actions.down).data("count", data.vote.actions.down);
        });
        socket.on("song change", function(data){
            song_catch(data);
        });
        socket.on("vote change", function(data){
            var thumb = $('#thumb-'+data.action+' > span');
            thumb.text(parseInt(thumb.data("count")) + 1).data("count", parseInt(thumb.data("count")) + 1);
        });
        function song_catch(data) {
            if (data !== null && data !== undefined) {
                song_change(true, data.artist, data.title);
                isEmpty = false;
            }else {
                song_change(false, $('.song-artist').data('empty'), $(".song-title").data('empty'));
                isEmpty = true;
            }
            
            function song_change(pt, at, st) {
                var text = (pt)?$('.now-playing').data('default'):$('.now-playing').data('empty');
                $('#active-song').removeClass('active').delay(1500).queue(function(next){
                    $('.song-artist').text(at).next('.song-title').text(st);
                    $('.now-playing > span').text(text);
                    $("a[id^='thumb-'] > span").text(0).data("count", 0);
                    $(this).addClass('active').dequeue();
                });
            }
        }
    });
</script>
    </head>
    <body>
        <div class="container-fluid">
            <header>
                QBox Lounge
            </header>
            <div id="content-area">
                <div id="homepage">
                    <div id="thumbs">
                        <a href="#" id="thumb-up" data-id="up" data-count="0"><span>0</span></a>
                        <a href="#" id="thumb-down" data-id="down" data-count="0"><span>0</span></a>
                    </div>
                    <div id="active-song">
                        <div class="now-playing" data-empty="No Current Song in Playlist" data-default="Now Playing">
                            <span class=" bg-area">
                                Now Playing
                            </span>
                        </div>
                        <div class="song-info">
                            <span class="bg-area">
                                <div class="song-artist" data-empty="Choose a Song">
                                    Stereo Skyline
                                </div>
                                <div class="song-title" data-empty="Tap the Button Below">
                                    Me & You
                                </div>
                            </span>
                        </div>
                    </div>
                    <a href="#album" id="pick-song">
                        <div class="first">
                            <span>
                                Pick The Next
                            </span>
                        </div>
                        <div class="last-video">
                            <span>
                                Song
                            </span>
                        </div>
                    </a>
                </div>
                <div id="album-list">
                    <ul id="albums">
                        <li>
                            <a href="#song">
                                <img src="http://placehold.it/130X130" />
                                <div class="album-title">
                                    <h3>Random Access Memory</h3>
                                    <p>Daft Punk</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="#song">
                                <img src="http://placehold.it/130X130" />
                                <div class="album-title">
                                    <h3>Toca Santos</h3>
                                    <p>Lulu Santos</p>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <nav id="chat-menu">
           <ul>
              <li><a href="/">Home</a></li>
              <li><a href="/about/">About us</a></li>
              <li><a href="/contact/">Contact</a></li>
           </ul>
        </nav>
        <div class="slide-modal">
            <div class="kurt">
                <img src="img/loader.gif" style=""> <p>Loading</p> 
            </div>
        </div>
        <input type="file" id="audio" name="audio" accept="audio/*" style="display:none;">
        <script src="js/vendor/jquery-1.10.2.min.js"></script>
        <script src="js/vendor/bootstrap.min.js"></script>
        <script src="js/plugins/jquery.mmenu.min.js"></script>
        <script src="js/plugins/isotope.min.js"></script>
        <script src="js/plugins/jquery.ajaxfileupload.js"></script>
        <script src="js/main.js"></script>
    </body>
</html>
