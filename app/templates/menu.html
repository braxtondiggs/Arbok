<ion-side-menus enable-menu-with-back-views="false">
  <ion-side-menu-content>
        <ion-nav-bar class="bar-stable">
            <ion-nav-back-button></ion-nav-back-button>
            <ion-nav-buttons side="left">
                <button class="button button-icon button-clear ion-navicon" menu-toggle="left"></button>
            </ion-nav-buttons>
            <form id="header-search" ng-submit="doSearch(search.term)" name="searchForm">
              <i class="ion-search"></i>
              <input class="search" name="search" id="search" type="search" placeholder="Search" ng-model="search.term" ng-minlength="1">
              <a class="ion-close clear-search" ng-show="search.term.length" ng-click="search.term = ''"></a>
            </form>
        </ion-nav-bar>
        <ion-nav-view name="menuContent"></ion-nav-view>
        <div ng-include="'templates/footer.html'"></div>
    </ion-side-menu-content>

    <ion-side-menu side="left" class="dark-menu" watch-menu>
        <header class="bar bar-header bar-stable" ng-class="currentUser._serverData ? 'loggedIn' : 'loggedOut'">
            <a class="settings" nav-clear menu-close href="#/app/settings" ng-if="currentUser._serverData">
                <i class="icon ion-gear-b" ng-class="{'animated bounceIn': ratio}" ng-show="ratio"></i>
            </a>
            <div class="profile" ng-click="updateImage()" ng-if="currentUser._serverData">
                <div class="img-circle" ng-class="{'animated bounceIn': ratio}" ng-show="ratio">
                    <img alt="" ng-src="{{currentUser.image}}"/>
                    <i class="icon ion-plus-circled"></i>
                </div>
                <h1 class="title" ng-class="{'animated fadeInLeft': ratio}" ng-if="currentUser._serverData && ratio">{{currentUser.get('name')}}</h1>
                <div class="background" ng-style="{'background-image':'url({{currentUser.image}})'}"></div>
            </div>
        </header>
        <ion-content class="has-header">
            <ion-list>
                <ion-item nav-clear menu-close ng-class="{'animated fadeInLeft delay-1': ratio}" ng-click="login();" href="#" ng-if="!currentUser._serverData && ratio">
                    <i class="icon ion-person-stalker" ng-class="{'animated bounceIn delay-6': ratio}" ng-show="ratio"></i>Log-in / Sign-up
                </ion-item>
                <ion-item nav-clear menu-close ng-class="{'animated fadeInLeft delay-2': ratio}" ng-show="ratio" href="#/app/dash">
                    <i class="icon ion-home" ng-class="{'animated bounceIn delay-7': ratio}" ng-show="ratio"></i>Dashboard<span class="badge badge-assertive">0</span>
                </ion-item>
                <ion-item menu-close ng-class="{'animated fadeInLeft delay-3': ratio}" ng-show="ratio" href="#app/search/" ng-click="setSearchBar(true)">
                    <i class="icon ion-search" ng-class="{'animated bounceIn delay-8': ratio}" ng-show="ratio"></i>Search
                </ion-item>
                <ion-item nav-clear menu-close ng-class="{'animated fadeInLeft delay-4': ratio}" ng-show="ratio" href="#/app/browse">
                    <i class="icon ion-folder" ng-class="{'animated bounceIn delay-9': ratio}" ng-show="ratio"></i>Browse
                </ion-item>
                <ion-item nav-clear menu-close ng-class="{'animated fadeInLeft delay-5': ratio}" ng-show="ratio" href="#/app/player">
                    <i class="icon ion-radio-waves"ng-class="{'animated bounceIn delay-10': ratio}" ng-show="ratio"></i>Find a MVPlayer
                </ion-item>
                <ion-item nav-clear menu-close ng-class="{'animated fadeInLeft delay-6': ratio}" ng-show="ratio" href="#/app/music">
                    <i class="icon ion-headphone" ng-class="{'animated bounceIn delay-11': ratio}" ng-show="ratio" ></i>My Music
                </ion-item>
                <ion-item nav-clear class="logout" ng-click="logout();" ng-if="currentUser._serverData">
                    <i class="icon ion-person-stalker animated bounceIn" ng-show="ratio"></i>Logout
                </ion-item>
            </ion-list>
        </ion-content>
    </ion-side-menu>
    <ion-side-menu side="right" class="dark-menu">
        <header class="bar bar-header bar-stable">
            <h1 class="title"><i class="ion-music-note"></i>What's Playing</h1>
        </header>
        <ion-content class="has-header">
            <ion-list class="list queue dark-list" ng-show="queue_list.length">
                <ion-item class="item item-thumbnail-left item-remove-animate" href="#/app/artist/slug/{{queue.IMVDBartistId}}" menu-close ng-repeat="queue in queue_list">
                    <img ng-src="{{queue.imagePreview}}">
                    <i class="icon ion-chevron-right icon-accessory"></i>
                    <h2>{{queue.artistInfo}}</h2>
                    <p>{{queue.trackInfo}}</p>
                    <ion-option-button class="button-assertive icon ion-trash-a" ng-click="deleteSong(queue);$event.stopPropagation();" ng-if="queue.userId === currentUser.id"></ion-option-button>
                </ion-item>
            </ion-list>
            <p ng-show="!queue_list.length" class="empty-list">Is it quiet in here? No music is playing. Be the first!</p>
        </ion-content>
    </ion-side-menu>
</ion-side-menus>