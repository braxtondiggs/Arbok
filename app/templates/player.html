<ion-view view-title="Alma Venues" ng-style="{'background-image':'url(images/BG.png)'}" class="player">
    <ion-content ng-class="{'has-footer': queue.length}">
    <ion-refresher pulling-text="Pull to refresh..." on-refresh="doRefresh()"></ion-refresher>
        <div class="animated" ng-show="players.length" ng-class="players.length ? 'fadeIn' : 'fadeOut'">
            <div class="list card dark-list" ng-repeat="player in players" ng-click="joinServer($index)" ng-class="{'offline-player': !player.get('isActive')}">
                <div class="item item-avatar list-title animated fadeIn" ng-class="{'demo-player':$index === 0}">
                    <img ng-src="{{(player.get('image'))?player.get('image')._url:'images/logo_missing.png'}}" err-src="images/logo_missing.png">
                    <h2>{{player.get('name')}}&nbsp;<span>(~{{getDistance(player.get('latlng')._latitude, player.get('latlng')._longitude, lnglat.lat, lnglat.lng, 'm')}} miles)</span></h2>
                    <p>{{player.get('address')}}</p>
                </div>
                <div class="item item-image animated fadeIn" ng-if="player.get('playingImg')">
                    <img ng-src="{{player.get('playingImg')}}" err-src="images/logo_missing.png">
                </div>
                <a class="item item-icon-left assertive animated fadeIn" ng-if="player.get('isActive')">
                    <i class="icon ion-music-note"></i> Join The Party
                </a>
            </div>
            <button class="button button-outline dark-button" ng-click="resetLocation();">Wrong Players? Manually Edit Location</button>
        </div>
        <div ng-show="!players.length && loaded || lnglat.err" class="animated" ng-class="!players.length && loaded || lnglat.err ? 'fadeIn' : 'fadeOut'">
            <p class="empty-list" ng-show="!players.length">It looks there isn't any Alma Players in your area. <i class="ion-sad"></i></p>
            <p class="empty-list">If you know your location, use the input below to manually set your location.</p>
            <div class="input input-inline-button animated tada delay-5" >
                <label class="input__label location-label" for="location">
                    <i class="icon ion-ios-location"></i>
                </label>
                <input class="input__field" type="text" placeholder="Location" name="location" id="location-player" ng-model="location">
                <button class="button button-outline dark-button location-button" ng-click="findLocation(location)">Go</button>
            </div>
        </div>
        <p class="empty-list" ng-show="!players.length && !loaded && !lnglat.err"><i class="ion-navigate animated swing infinite"></i>&nbsp;We are trying to determine your location. Please wait...</p>
    </ion-content>
</ion-view>